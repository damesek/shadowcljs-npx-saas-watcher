shadow$provide.module$node_modules$vega_event_selector$build$vega_event_selector=function(global$jscomp$0,process,require,module,exports$jscomp$0,shadow$shims){(function(global,factory){"object"===typeof exports$jscomp$0&&"undefined"!==typeof module?factory(exports$jscomp$0):"function"===typeof define&&define.amd?define(["exports"],factory):(global=global||self,factory(global.vega={}))})(this,function(exports){function find(s,i,endChar,pushChar,popChar){for(var count=0,n=s.length,c;i<n;++i)if(c=s[i],
count||c!==endChar)popChar&&0<=popChar.indexOf(c)?--count:pushChar&&0<=pushChar.indexOf(c)&&++count;else break;return i}function parseMerge(s){for(var output=[],start=0,n=s.length,i=0;i<n;)i=find(s,i,COMMA,LBRACK+LBRACE,RBRACK+RBRACE),output.push(s.substring(start,i).trim()),start=++i;if(0===output.length)throw"Empty event selector: "+s;return output}function parseSelector(s){if("["===s[0]){var JSCompiler_temp=s;var n=JSCompiler_temp.length;s=find(JSCompiler_temp,1,RBRACK,LBRACK,RBRACK);if(s===n)throw"Empty between selector: "+
JSCompiler_temp;n=parseMerge(JSCompiler_temp.substring(1,s));if(2!==n.length)throw"Between selector must have two elements: "+JSCompiler_temp;JSCompiler_temp=JSCompiler_temp.slice(s+1).trim();if(JSCompiler_temp[0]!==GT)throw"Expected '\x3e' after between selector: "+JSCompiler_temp;n=n.map(parseSelector);JSCompiler_temp=parseSelector(JSCompiler_temp.slice(1).trim());JSCompiler_temp.between?JSCompiler_temp={between:n,stream:JSCompiler_temp}:JSCompiler_temp.between=n}else{n={source:DEFAULT_SOURCE};
var source=[],throttle=[0,0],markname=0,start=0,n$jscomp$0=s.length,i=0;if(s[n$jscomp$0-1]===RBRACE){i=s.lastIndexOf(LBRACE);if(0<=i){try{throttle=parseThrottle(s.substring(i+1,n$jscomp$0-1))}catch(e){throw"Invalid throttle specification: "+s;}s=s.slice(0,i).trim();n$jscomp$0=s.length}else throw"Unmatched right brace: "+s;i=0}if(!n$jscomp$0)throw s;s[0]===NAME&&(markname=++i);var j=find(s,i,COLON);j<n$jscomp$0&&(source.push(s.substring(start,j).trim()),start=i=++j);i=find(s,i,LBRACK);if(i===n$jscomp$0)source.push(s.substring(start,
n$jscomp$0).trim());else if(source.push(s.substring(start,i).trim()),JSCompiler_temp=[],start=++i,start===n$jscomp$0)throw"Unmatched left bracket: "+s;for(;i<n$jscomp$0;){i=find(s,i,RBRACK);if(i===n$jscomp$0)throw"Unmatched left bracket: "+s;JSCompiler_temp.push(s.substring(start,i).trim());if(i<n$jscomp$0-1&&s[++i]!==LBRACK)throw"Expected left bracket: "+s;start=++i}if(!(n$jscomp$0=source.length)||ILLEGAL.test(source[n$jscomp$0-1]))throw"Invalid event selector: "+s;1<n$jscomp$0?(n.type=source[1],
markname?n.markname=source[0].slice(1):MARKS[source[0]]?n.marktype=source[0]:n.source=source[0]):n.type=source[0];"!"===n.type.slice(-1)&&(n.consume=!0,n.type=n.type.slice(0,-1));null!=JSCompiler_temp&&(n.filter=JSCompiler_temp);throttle[0]&&(n.throttle=throttle[0]);throttle[1]&&(n.debounce=throttle[1]);JSCompiler_temp=n}return JSCompiler_temp}function parseThrottle(s){var a=s.split(COMMA);if(!s.length||2<a.length)throw s;return a.map(function(_){_=+_;if(_!==_)throw s;return _})}var LBRACK="[",RBRACK=
"]",LBRACE="{",RBRACE="}",COLON=":",COMMA=",",NAME="@",GT="\x3e",ILLEGAL=/[[\]{}]/,DEFAULT_SOURCE,MARKS,DEFAULT_MARKS={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};exports.selector=function(selector,source,marks){DEFAULT_SOURCE=source||"view";MARKS=marks||DEFAULT_MARKS;return parseMerge(selector.trim()).map(parseSelector)};Object.defineProperty(exports,"__esModule",{value:!0})})}
//# sourceMappingURL=module$node_modules$vega_event_selector$build$vega_event_selector.js.map
