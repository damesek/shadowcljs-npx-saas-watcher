{
"version":3,
"file":"module$node_modules$vega_selections$build$vega_selections.js",
"lineCount":9,
"mappings":"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",
"sources":["node_modules/vega-selections/build/vega-selections.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$vega_selections$build$vega_selections\"] = function(global,process,require,module,exports,shadow$shims) {\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('vega-util'), require('vega-expression')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'vega-util', 'vega-expression'], factory) :\n  (global = global || self, factory(global.vega = {}, global.vega, global.vega));\n}(this, function (exports, vegaUtil, vegaExpression) { 'use strict';\n\n  const Intersect = 'intersect';\n  const Union = 'union';\n\n  var TYPE_ENUM = 'E',\n      TYPE_RANGE_INC = 'R',\n      TYPE_RANGE_EXC = 'R-E',\n      TYPE_RANGE_LE = 'R-LE',\n      TYPE_RANGE_RE = 'R-RE',\n      UNIT_INDEX = 'index:unit';\n\n  // TODO: revisit date coercion?\n  function testPoint(datum, entry) {\n    var fields = entry.fields,\n        values = entry.values,\n        n = fields.length,\n        i = 0, dval, f;\n\n    for (; i<n; ++i) {\n      f = fields[i];\n      f.getter = vegaUtil.field.getter || vegaUtil.field(f.field);\n      dval = f.getter(datum);\n\n      if (vegaUtil.isDate(dval)) dval = vegaUtil.toNumber(dval);\n      if (vegaUtil.isDate(values[i])) values[i] = vegaUtil.toNumber(values[i]);\n      if (vegaUtil.isDate(values[i][0])) values[i] = values[i].map(vegaUtil.toNumber);\n\n      if (f.type === TYPE_ENUM) {\n        // Enumerated fields can either specify individual values (single/multi selections)\n        // or an array of values (interval selections).\n        if(vegaUtil.isArray(values[i]) ? values[i].indexOf(dval) < 0 : dval !== values[i]) {\n          return false;\n        }\n      } else {\n        if (f.type === TYPE_RANGE_INC) {\n          if (!vegaUtil.inrange(dval, values[i])) return false;\n        } else if (f.type === TYPE_RANGE_RE) {\n          // Discrete selection of bins test within the range [bin_start, bin_end).\n          if (!vegaUtil.inrange(dval, values[i], true, false)) return false;\n        } else if (f.type === TYPE_RANGE_EXC) { // 'R-E'/'R-LE' included for completeness.\n          if (!vegaUtil.inrange(dval, values[i], false, false)) return false;\n        } else if (f.type === TYPE_RANGE_LE) {\n          if (!vegaUtil.inrange(dval, values[i], false, true)) return false;\n        }\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Tests if a tuple is contained within an interactive selection.\n   * @param {string} name - The name of the data set representing the selection.\n   *  Tuples in the dataset are of the form\n   *  {unit: string, fields: array<fielddef>, values: array<*>}.\n   *  Fielddef is of the form\n   *  {field: string, channel: string, type: 'E' | 'R'} where\n   *  'type' identifies whether tuples in the dataset enumerate\n   *  values for the field, or specify a continuous range.\n   * @param {object} datum - The tuple to test for inclusion.\n   * @param {string} op - The set operation for combining selections.\n   *   One of 'intersect' or 'union' (default).\n   * @return {boolean} - True if the datum is in the selection, false otherwise.\n   */\n  function selectionTest(name, datum, op) {\n    var data = this.context.data[name],\n        entries = data ? data.values.value : [],\n        unitIdx = data ? data[UNIT_INDEX] && data[UNIT_INDEX].value : undefined,\n        intersect = op === Intersect,\n        n = entries.length,\n        i = 0,\n        entry, miss, count, unit, b;\n\n    for (; i<n; ++i) {\n      entry = entries[i];\n\n      if (unitIdx && intersect) {\n        // multi selections union within the same unit and intersect across units.\n        miss = miss || {};\n        count = miss[unit=entry.unit] || 0;\n\n        // if we've already matched this unit, skip.\n        if (count === -1) continue;\n\n        b = testPoint(datum, entry);\n        miss[unit] = b ? -1 : ++count;\n\n        // if we match and there are no other units return true\n        // if we've missed against all tuples in this unit return false\n        if (b && unitIdx.size === 1) return true;\n        if (!b && count === unitIdx.get(unit).count) return false;\n      } else {\n        b = testPoint(datum, entry);\n\n        // if we find a miss and we do require intersection return false\n        // if we find a match and we don't require intersection return true\n        if (intersect ^ b) return b;\n      }\n    }\n\n    // if intersecting and we made it here, then we saw no misses\n    // if not intersecting, then we saw no matches\n    // if no active selections, return false\n    return n && intersect;\n  }\n\n  /**\n   * Resolves selection for use as a scale domain or reads via the API.\n   * @param {string} name - The name of the dataset representing the selection\n   * @param {string} [op='union'] - The set operation for combining selections.\n   *                 One of 'intersect' or 'union' (default).\n   * @returns {object} An object of selected fields and values.\n   */\n  function selectionResolve(name, op) {\n    var data = this.context.data[name],\n      entries = data ? data.values.value : [],\n      resolved = {}, types = {},\n      entry, fields, values, unit, field, res, resUnit, type, union,\n      n = entries.length, i = 0, j, m;\n\n    // First union all entries within the same unit.\n    for (; i < n; ++i) {\n      entry = entries[i];\n      unit = entry.unit;\n      fields = entry.fields;\n      values = entry.values;\n\n      for (j = 0, m = fields.length; j < m; ++j) {\n        field = fields[j];\n        res = resolved[field.field] || (resolved[field.field] = {});\n        resUnit = res[unit] || (res[unit] = []);\n        types[field.field] = type = field.type.charAt(0);\n        union = ops[type + '_union'];\n        res[unit] = union(resUnit, vegaUtil.array(values[j]));\n      }\n    }\n\n    // Then resolve fields across units as per the op.\n    op = op || Union;\n    Object.keys(resolved).forEach(function (field) {\n      resolved[field] = Object.keys(resolved[field])\n        .map(function (unit) { return resolved[field][unit]; })\n        .reduce(function (acc, curr) {\n          return acc === undefined ? curr :\n            ops[types[field] + '_' + op](acc, curr);\n        });\n    });\n\n    return resolved;\n  }\n\n  var ops = {\n    E_union: function(base, value) {\n      if (!base.length) return value;\n\n      var i = 0, n = value.length;\n      for (; i<n; ++i) if (base.indexOf(value[i]) < 0) base.push(value[i]);\n      return base;\n    },\n\n    E_intersect: function(base, value) {\n      return !base.length ? value :\n        base.filter(function (v) { return value.indexOf(v) >= 0; });\n    },\n\n    R_union: function(base, value) {\n      var lo = vegaUtil.toNumber(value[0]), hi = vegaUtil.toNumber(value[1]);\n      if (lo > hi) {\n        lo = value[1];\n        hi = value[0];\n      }\n\n      if (!base.length) return [lo, hi];\n      if (base[0] > lo) base[0] = lo;\n      if (base[1] < hi) base[1] = hi;\n      return base;\n    },\n\n    R_intersect: function(base, value) {\n      var lo = vegaUtil.toNumber(value[0]), hi = vegaUtil.toNumber(value[1]);\n      if (lo > hi) {\n        lo = value[1];\n        hi = value[0];\n      }\n\n      if (!base.length) return [lo, hi];\n      if (hi < base[0] || base[1] < lo) {\n        return [];\n      } else {\n        if (base[0] < lo) base[0] = lo;\n        if (base[1] > hi) base[1] = hi;\n      }\n      return base;\n    }\n  };\n\n  const DataPrefix = ':',\n        IndexPrefix = '@';\n\n  function selectionVisitor(name, args, scope, params) {\n    if (args[0].type !== vegaExpression.Literal) vegaUtil.error('First argument to selection functions must be a string literal.');\n\n    const data = args[0].value,\n          op = args.length >= 2 && vegaUtil.peek(args).value,\n          field = 'unit',\n          indexName = IndexPrefix + field,\n          dataName = DataPrefix + data;\n\n    // eslint-disable-next-line no-prototype-builtins\n    if (op === Intersect && !vegaUtil.hasOwnProperty(params, indexName)) {\n      params[indexName] = scope.getData(data).indataRef(scope, field);\n    }\n\n    // eslint-disable-next-line no-prototype-builtins\n    if (!vegaUtil.hasOwnProperty(params, dataName)) {\n      params[dataName] = scope.getData(data).tuplesRef();\n    }\n  }\n\n  exports.selectionResolve = selectionResolve;\n  exports.selectionTest = selectionTest;\n  exports.selectionVisitor = selectionVisitor;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n\n};"],
"names":["shadow$provide","global","process","require","module","exports","shadow$shims","factory","define","amd","self","vega","vegaUtil","vegaExpression","testPoint","datum","entry","fields","values","n","length","i","dval","f","getter","field","isDate","toNumber","map","TYPE_ENUM","type","isArray","indexOf","TYPE_RANGE_INC","inrange","TYPE_RANGE_RE","TYPE_RANGE_EXC","TYPE_RANGE_LE","ops","E_union","base","value","push","E_intersect","filter","v","R_union","lo","hi","R_intersect","selectionResolve","name","op","entries","data","context","resolved","types","unit","res","resUnit","j","m","charAt","union","array","Union","Object","keys","forEach","reduce","acc","curr","undefined","selectionTest","unitIdx","UNIT_INDEX","intersect","Intersect","miss","count","b","size","get","selectionVisitor","args","scope","params","Literal","error","peek","dataName","DataPrefix","hasOwnProperty","indexName","getData","indataRef","tuplesRef","defineProperty"]
}
